# fem2d: Finite Element Method 2D Solver

## Описание Проекта

`fem2d` - это программа для решения задач методом конечных элементов в двухмерном пространстве. Программа предназначена для анализа напряженно-деформированного состояния конструкций, состоящих из стержневых элементов (ферм).

## Основные Возможности

*   **Анализ ферм:** Вычисление перемещений узлов, напряжений и деформаций в стержневых элементах.
*   **Конфигурация через файл:** Гибкая настройка модели через текстовый конфигурационный файл.
*   **Визуализация результатов:** Отображение деформированной геометрии, распределения напряжений и деформаций с помощью VTK.
*   **Модульная архитектура:** Код разбит на модули для простоты обслуживания и расширения функциональности.

## Структура Проекта

Проект разбит на следующие директории:

*   **`solver`**: Содержит логику для решения системы уравнений методом конечных элементов.
*   **`preprocessor`**: Содержит код для обработки конфигурационного файла и создания модели.
*   **`postprocessor`**: Содержит код для визуализации результатов.

## Конфигурационный Файл `config.txt`

Программа принимает на вход конфигурационный файл, в котором задаются параметры модели. Каждая строка в файле представляет собой команду с соответствующими аргументами.

### Формат Команд:

*   **`ETYPE,TRUSS`**:
    *   **`ETYPE`**: Команда, обозначающая тип элемента.
    *   **`TRUSS`**: Тип элемента (в текущей версии поддерживается только `TRUSS`).

*   **`MATERIAL,<модуль упругости>,<коэффициент Пуассона>,<плотность>,<индекс материала>`**:
    *   **`MATERIAL`**: Команда, обозначающая свойства материала.
    *   **`<модуль упругости>`**: Модуль упругости материала (например, 7000000000).
    *   **`<коэффициент Пуассона>`**: Коэффициент Пуассона материала (например, 0.3).
    *   **`<плотность>`**: Плотность материала (например, 2800).
    *   **`<индекс материала>`**: Индекс материала (например, 1).

*   **`SECTION,<площадь сечения>`**:
    *   **`SECTION`**: Команда, обозначающая площадь сечения элемента.
    *   **`<площадь сечения>`**: Площадь сечения (например, 0.1).

*   **`NODE,<индекс узла>,<координата x>,<координата y>`**:
    *   **`NODE`**: Команда, обозначающая узел.
    *   **`<индекс узла>`**: Индекс узла (например, 1).
    *   **`<координата x>`**: Координата узла по оси X.
    *   **`<координата y>`**: Координата узла по оси Y.

*   **`ELEM,<индекс первого узла>,<индекс второго узла>,<индекс материала>`**:
    *   **`ELEM`**: Команда, обозначающая элемент.
    *   **`<индекс первого узла>`**: Индекс первого узла, соединенного элементом.
    *   **`<индекс второго узла>`**: Индекс второго узла, соединенного элементом.
    *   **`<индекс материала>`**: Индекс материала, к которому относится элемент.

*   **`FORCE,<индекс узла>,<нагрузка по x>,<нагрузка по y>`**:
    *   **`FORCE`**: Команда, обозначающая приложенную нагрузку.
    *   **`<индекс узла>`**: Индекс узла, к которому приложена нагрузка.
    *   **`<нагрузка по x>`**: Значение нагрузки по оси X.
    *   **`<нагрузка по y>`**: Значение нагрузки по оси Y.

*   **`DISP,<индекс узла>,<закрепление по x>,<закрепление по y>`**:
    *   **`DISP`**: Команда, обозначающая граничное условие - закрепление.
    *   **`<индекс узла>`**: Индекс узла, который закреплен.
    *   **`<закрепление по x>`**: Значение закрепления по оси X. Если значение не указано (например, `DISP,7,,0`), то считается, что нет закрепления.
    *   **`<закрепление по y>`**: Значение закрепления по оси Y. Если значение не указано (например, `DISP,7,0,`), то считается, что нет закрепления.

### Пример Файла `config.txt`:

```
ETYPE,TRUSS

MATERIAL,7000000000,0.3,2800,1

SECTION,0.1

NODE,1,0,0
NODE,2,1,1
NODE,3,2,0
NODE,4,3,1
NODE,5,4,0
NODE,6,5,1
NODE,7,6,0

ELEM,1,2,1
ELEM,2,3,1
ELEM,1,3,1
ELEM,2,4,1
ELEM,3,4,1
ELEM,3,5,1
ELEM,4,5,1
ELEM,4,6,1
ELEM,5,6,1
ELEM,5,7,1
ELEM,6,7,1

FORCE,3,-50000,-10000
FORCE,5,10000,-50000

DISP,1,0,0
DISP,7,0,0
```

## Сборка Проекта

Для сборки проекта необходимо использовать CMake.

### Требования

*   CMake (версии 3.23 или выше)
*   C++ компилятор с поддержкой C++17
*   Boost (версия 1.83.0 или выше)
*   VTK (версии, совместимые с VTK 9)
*  Ninja build system (рекомендовано)

### Шаги Сборки

1.  **Клонирование репозитория:**

    ```bash
    git clone https://github.com/antonnurapkin/fem2d.git
    cd fem2d
    ```

2.  **Создание директории build и переход в неё:**

```bash
    mkdir build
    cd build
```

3.  **Выполнение CMake:**

```bash
    cmake ..
```

4.  **Сборка проекта:**

```bash
    cmake --build .
```


###  Рекомендации по сборке:

<ol>
    <li>Использование Ninja: Для более быстрой и эффективной сборки рекомендуется использовать Ninja Build System.</li>
    <li>Указание путей: В случае, если Boost или VTK установлены в нестандартных местах, необходимо указать их пути при помощи CMake. Например: -DBoost_DIR=/path/to/boost -DVTK_DIR=/path/to/vtk.</li>
    <li>Использование переменных окружения: Если Boost или VTK уже прописаны в переменных окружения, CMake их автоматически найдет.</li>
    <li>Конфигурация CMake: В случае ошибок линковки, проверьте правильно ли указанны библиотеки VTK. Убедитесь, что в файле CMakeLists.txt вашего проекта VTK_LIBRARIES указаны правильно и все необходимые компоненты перечислены.</li>
</ol>

## Запуск программы

После успешной сборки проект можно запустить следующей командой:

```bash
    ./fem2d --input path/to/config.txt
```

<ul>
<li>fem2d - исполняемый файл</li>
<li>--input - параметр, указывающий путь к конфигурационному файлу (config.txt).</li>
<li>path/to/config.txt - путь к вашему конфигурационному файлу.</li>
</ul>

## Дополнительная информация

<ol>
<li>Примеры: В директории <адрес_вашего_репозитория>/examples могут находиться примеры конфигурационных файлов и моделей.</li>
<li>Расширяемость: Проект спроектирован таким образом, чтобы его можно было расширять, добавляя новые типы элементов, материалов и возможностей визуализации.</li>
</ol>

## Заключение

Данная документация предоставляет базовую информацию о проекте fem2d, его сборке и использовании. Для более глубокого понимания, рекомендуется ознакомиться с исходным кодом и примерами.